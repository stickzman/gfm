<textarea id="input" rows="20" cols="80"></textarea>
<textarea id="output" type="textarea" rows="20" cols="80" readonly></textarea>
<button onclick="convert()">Convert</button>

<script src="jquery-3.3.1.min.js"></script>
<script>
    let lines, i, styleSheet;
    fetch("https://raw.githubusercontent.com/sindresorhus/github-markdown-css/gh-pages/github-markdown.css").then(function(response) {
        response.text().then(function(text) {
            styleSheet = `<style>.markdown-body { box-sizing: border-box; min-width: 200px; max-width: 980px; margin: 0 auto; padding: 45px; } @media (max-width: 767px) { .markdown-body { padding: 15px; } }${text}</style>`;
        });
    });

    function convert() {
        if ($("#input").val().trim().length == 0) {
            $("#output").val("");
            return;
        }
        lines = $("#input").val().split("\n");
        //Parse input/Build elements
        let root = $("<div>").addClass("markdown-body");
        for (i = 0; i < lines.length; i++) {
            if (/^#+ /.test(lines[i].trim()) && !/^#######+ /.test(lines[i].trim())) {
                //If it starts with >0 and <7 #s, it's a header
                parseHeader(root);
            } else if (lines[i].trim().length == 0) {
                //Break
                root.append($("<br>"));
            } else {
                parsePara(root);
            }
        }
        $("#output").val(root[0].outerHTML + "\n\n" + styleSheet);
    }

    function parsePara(parent) {
        //Paragraph
        let e = $("<p>");
        let str = lines[i].trim();
        while (i < lines.length - 1 && !(/  $/.test(lines[i]) ||
                lines[i+1].trim().length == 0)) {
            str += " " + lines[++i].trim();
        }
        e.append(parseLine(str, e));
        parent.append(e);
    }

    function parseHeader(parent) {
        //Headers
        let str = lines[i].trim();
        let hashes = str.substr(0, str.indexOf(" ")).match(/#/g);
        let hNum = hashes.length;
        let e = $(`<h${hNum}>`);
        str = str.substr(hNum + 1);
        str = str.replace(/ #*$/, "");
        parseLine(str, e);
        parent.append(e);
    }

    function parseLine(str, parent) {
        parent.append(str);
    }
</script>
